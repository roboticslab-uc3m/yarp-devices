<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yarp-devices: AravisGigE device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">yarp-devices
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">AravisGigE device</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md17"></a>To use this YARP device a GigE camera is required. Once connected, use the following commands to control the camera and receive images.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Requirements</h1>
<p>Depends on:</p><ul>
<li><a href="https://robots.uc3m.es/installation-guides/install-aravis.html">Aravis 0.4</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md19"></a>
Launching the device</h1>
<p>To run the device and connect to the camera, simply run:</p>
<p><code>yarpdev --device <a class="el" href="classAravisGigE.html" title="Implementation for GigE cameras using Aravis as driver.">AravisGigE</a></code></p>
<p>If you want to test the device without an actual camera, you can use a fake Aravis camera:</p>
<p><code>yarpdev --device <a class="el" href="classAravisGigE.html" title="Implementation for GigE cameras using Aravis as driver.">AravisGigE</a> --fake</code></p>
<h1><a class="anchor" id="autotoc_md20"></a>
Obtaining a color image from the device</h1>
<p>This YARP device returns a raw 8-bit image from the camera, to obtain a color image from the image, the stream has to be connected using the <a href="http://www.yarp.it/carrier_config.html#carrier_config_bayer">Bayer carrier</a> to interpret the raw image as a RGB image. Given an <code><a class="el" href="classAravisGigE.html" title="Implementation for GigE cameras using Aravis as driver.">AravisGigE</a></code> device named <code>/grabber</code> and an input port named <code>/v</code> (from a viewer, for instance), the command to run to connect them is:</p>
<p><code>yarp connect /grabber /v udp+recv.bayer+order.gbrg</code></p>
<h1><a class="anchor" id="autotoc_md21"></a>
Camera parameters control</h1>
<p>The control of the camera parameters is performed from the image port (<code>/grabber</code> by default ), through a <a href="http://www.yarp.it/rpc_ports.html">RPC interface</a>.</p>
<p><code>yarp rpc /grabber</code></p>
<p>Once there one can send command to the camera. The most common commands are: <code>has</code>, <code>get</code> and <code>set</code>.</p>
<h2><a class="anchor" id="autotoc_md22"></a>
has</h2>
<p>With the <code>has</code> command one can query the device if it has some property. For instance, to check if the camera has zoom controls:</p>
<p><code>fgc has feat 16</code></p>
<h2><a class="anchor" id="autotoc_md23"></a>
get</h2>
<p>With the ' get' command one can query the <em>value</em> of some property. For instance, to check the current gain value:</p>
<p><code>fgc get feat 9</code></p>
<h2><a class="anchor" id="autotoc_md24"></a>
set</h2>
<p>With the <code>set</code> command one can change the <em>value</em> of some property. For instance, to set the zoom to the maximum value:</p>
<p><code>fgc set feat 16 100</code></p>
<h2><a class="anchor" id="autotoc_md25"></a>
Available features</h2>
<p>These are the features currently available in YARP. To check which ones are supported by the camera, the <code>has</code> command can be used:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Feature   </th><th class="markdownTableHeadNone">Enum name   </th><th class="markdownTableHeadNone">Enum value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Brightness   </td><td class="markdownTableBodyNone">YARP_FEATURE_BRIGHTNESS   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Exposure   </td><td class="markdownTableBodyNone">YARP_FEATURE_EXPOSURE   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Sharpness   </td><td class="markdownTableBodyNone">YARP_FEATURE_SHARPNESS   </td><td class="markdownTableBodyNone">2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">White Balance   </td><td class="markdownTableBodyNone">YARP_FEATURE_WHITE_BALANCE   </td><td class="markdownTableBodyNone">3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Hue   </td><td class="markdownTableBodyNone">YARP_FEATURE_HUE   </td><td class="markdownTableBodyNone">4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Saturation   </td><td class="markdownTableBodyNone">YARP_FEATURE_SATURATION   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gamma   </td><td class="markdownTableBodyNone">YARP_FEATURE_GAMMA   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Shutter   </td><td class="markdownTableBodyNone">YARP_FEATURE_SHUTTER   </td><td class="markdownTableBodyNone">7    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Gain   </td><td class="markdownTableBodyNone">YARP_FEATURE_GAIN   </td><td class="markdownTableBodyNone">8    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Iris   </td><td class="markdownTableBodyNone">YARP_FEATURE_IRIS   </td><td class="markdownTableBodyNone">9    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Focus   </td><td class="markdownTableBodyNone">YARP_FEATURE_FOCUS   </td><td class="markdownTableBodyNone">10    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Temperature   </td><td class="markdownTableBodyNone">YARP_FEATURE_TEMPERATURE   </td><td class="markdownTableBodyNone">11    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Trigger   </td><td class="markdownTableBodyNone">YARP_FEATURE_TRIGGER   </td><td class="markdownTableBodyNone">12    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Trigger delay   </td><td class="markdownTableBodyNone">YARP_FEATURE_TRIGGER_DELAY   </td><td class="markdownTableBodyNone">13    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">White Shading   </td><td class="markdownTableBodyNone">YARP_FEATURE_WHITE_SHADING   </td><td class="markdownTableBodyNone">14    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frame Rate   </td><td class="markdownTableBodyNone">YARP_FEATURE_FRAME_RATE   </td><td class="markdownTableBodyNone">15    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Zoom   </td><td class="markdownTableBodyNone">YARP_FEATURE_ZOOM   </td><td class="markdownTableBodyNone">16    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pan   </td><td class="markdownTableBodyNone">YARP_FEATURE_PAN   </td><td class="markdownTableBodyNone">17    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tilt   </td><td class="markdownTableBodyNone">YARP_FEATURE_TILT   </td><td class="markdownTableBodyNone">18    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Optical Filter   </td><td class="markdownTableBodyNone">YARP_FEATURE_OPTICAL_FILTER   </td><td class="markdownTableBodyNone">19    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Capture size   </td><td class="markdownTableBodyNone">YARP_FEATURE_CAPTURE_SIZE   </td><td class="markdownTableBodyNone">20    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Capture quality   </td><td class="markdownTableBodyNone">YARP_FEATURE_CAPTURE_QUALITY   </td><td class="markdownTableBodyNone">21    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Mirror   </td><td class="markdownTableBodyNone">YARP_FEATURE_MIRROR   </td><td class="markdownTableBodyNone">22    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Number of features   </td><td class="markdownTableBodyNone">YARP_FEATURE_NUMBER_OF   </td><td class="markdownTableBodyNone">23   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md26"></a>
FAQ</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
I can receive an image, but it is all dark, what can I do?</h2>
<p>This is probably due to a bad configuration of the camera parameters. Try to increase the gain or exposure until the image starts looking brighter. For the 1.0.B06 lab, some values that work great are:</p>
<div class="fragment"><div class="line">Gain: 10</div>
<div class="line">Exposure: 32000</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28"></a>
I cannot receive a color image, but I receive a grey image with a regular point pattern on it.</h2>
<p>What you are receiving is the raw image of the camera. To obtain a color image from it you need to decode it using a Bayer filter. Follow the steps in the section Obtaining a color image from the device in this very same guide to fix it.</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Useful links</h1>
<ul>
<li><a href="/programs/grabberControls2Gui">GrabberControls2GuiGUI</a> program </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
