<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yarp-devices: CanBusBroker</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">yarp-devices
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">CanBusBroker</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md30"></a> This device offers a custom way of interfacing with wrapped raw subdevices through <a href="http://www.yarp.it/devel/classyarp_1_1dev_1_1IRemoteVariables.html"><code>yarp::dev::IRemoteVariables</code></a>. Available variables depend on the implementation of the subdevice; e.g. <code>enableIp</code>, <code>ipMode</code>, <code>ipPeriodMs</code> and <code>enableCsv</code> presented in the below examples are provided by the <code><a class="el" href="classTechnosoftIpos.html" title="Implementation for the Technosoft iPOS as a single CAN bus joint (control board raw interfaces).">TechnosoftIpos</a></code> device and parsed in the corresponding implementation of the <code>yarp::dev::IRemoteVariablesRaw</code> interface.</p>
<hr  />
<p>**<code>getRemoteVariablesList</code>**</p>
<p>Lists all CAN node IDs prepended with "ID", e.g. <code>(ID15 ID16 ...)</code>.</p>
<ul>
<li>RPC sample usage: <code>[get] [ivar] [lvar]</code></li>
<li>Response: <code>(ID15 ID16 ID17 ID18 ID19 ID20)</code></li>
</ul>
<hr  />
<p>**<code>getRemoteVariable</code>**</p>
<p>Retrieves all available key-value pairs for the selected node. Calls <code>getRemoteVariablesListRaw</code> to get raw keys and then iterates on <code>getRemoteVariableRaw</code>. The presence of additional surrounding parentheses is due to how the mapper device works and to keep being compatible with <em>yarpmotorgui</em>.</p>
<ul>
<li>RPC sample usage: <code>[get] [ivar] [mvar] ID15</code></li>
<li>Response: <code>(((ipMode pvt) (ipPeriodMs 50) (enableIp 0) (enableCsv 1)))</code></li>
</ul>
<p>If <code>key</code> equals <code>all</code>, it returns remote vars for all available CAN nodes.</p>
<ul>
<li>RPC sample usage: <code>[get] [ivar] [mvar] all</code></li>
<li>Response: <code>((ID15 (ipMode pt) (ipPeriodMs 50) (enableIp 0) (enableCsv 0)) (ID16 (ipMode pt) (ipPeriodMs 50) (enableIp 0) (enableCsv 0)) (ID17 (ipMode pt) (ipPeriodMs 50) (enableIp 0) (enableCsv 0)) (ID18 (ipMode pt) (ipPeriodMs 50) (enableIp 0) (enableCsv 0)) (ID19 (ipMode pt) (ipPeriodMs 50) (enableIp 0) (enableCsv 0)) (ID20 (ipMode pt) (ipPeriodMs 50) (enableIp 0) (enableCsv 0)))</code></li>
</ul>
<hr  />
<p>**<code>setRemoteVariable</code>**</p>
<p>Requires a key-value two-element bottle, value is a nested list.</p>
<ul>
<li>RPC sample usage: <code>[set] [ivar] [mvar] ID15 (enableCsv 1)</code></li>
</ul>
<p>Multiple keys can be bound per call, just nest them within an additional layer of bottles.</p>
<ul>
<li>RPC sample usage: <code>[set] [ivar] [mvar] ID15 ((ipMode pvt) (ipPeriodMs 20) (enableIp 1))</code></li>
</ul>
<p>Same strategy works if you want to set the exact same remote variable (or variables) for all available nodes, just use <code>all</code> as key.</p>
<ul>
<li>RPC sample usage: <code>[set] [ivar] [mvar] all (enableCsv 1)</code></li>
<li>RPC sample usage: <code>[set] [ivar] [mvar] all ((ipMode pvt) (ipPeriodMs 20) (enableIp 1))</code></li>
</ul>
<p>It is also possible to target multiple nodes in a single call, and set one or more remote variables at once. Use <code>multi</code> as key.</p>
<ul>
<li>RPC sample usage: <code>[set] [ivar] [mvar] multi ((ID15 (enableCsv 1)) (ID16 (enableCsv 1)))</code></li>
<li>RPC sample usage: <code>[set] [ivar] [mvar] multi ((ID15 (enableIp 1) (enableCsv 1)) (ID16 (enableCsv 1)))</code> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
