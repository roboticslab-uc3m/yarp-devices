<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yarp-devices: exampleOnlineTrajectoryLocalPull.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">yarp-devices
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">exampleOnlineTrajectoryLocalPull.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>A constant-velocity, single-joint trajectory is generated with configurable final target, motion speed and period between consecutive points. The period is assumed constant (maps to cyclic synchronous position mode on the real robot, a.k.a. CSP). A callback is registered for listening to a local synchronization loop managed by <a class="el" href="group__CanBusBroker.html">CanBusBroker</a>, position commands will be prepared and sent in response. The techniques showcased here are especially suited for online-generated trajectories, e.g. joystick teleoperation of visual servoing.</p>
<p>Usage (showing default option values): </p><pre class="fragment"> exampleOnlineTrajectoryLocalPull --bus pcan-leftArm --ipos id26-ipos --speed 2.0 --target -20.0 --period 50
</pre><dl class="section see"><dt>See also</dt><dd><a class="el" href="exampleOnlineTrajectoryRemotePull_8cpp-example.html">exampleOnlineTrajectoryRemotePull.cpp</a> Command a remote instance of the real or simulated robot via callback on a YARP synchronization port. </dd>
<dd>
<a class="el" href="exampleOnlineTrajectoryRemotePush_8cpp-example.html">exampleOnlineTrajectoryRemotePush.cpp</a> Command a remote robot via direct position commands. </dd>
<dd>
<a href="https://robots.uc3m.es/teo-developer-manual/tutorial/trajectories.html">Tutorial: Trajectory Execution</a> (external) </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This application is not suitable for simulation.</dd></dl>
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// -*- mode:C++; tab-width:4; c-basic-offset:4; indent-tabs-mode:nil -*-</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;yarp/os/LogStream.h&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;yarp/os/Property.h&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;yarp/os/ResourceFinder.h&gt;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;yarp/os/SystemClock.h&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &lt;yarp/dev/IControlMode.h&gt;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &lt;yarp/dev/IEncoders.h&gt;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &lt;yarp/dev/IPositionDirect.h&gt;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &lt;yarp/dev/PolyDriver.h&gt;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &lt;StateObserver.hpp&gt;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> DEFAULT_BUS = <span class="stringliteral">&quot;socket-leftArm&quot;</span>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> DEFAULT_IPOS = <span class="stringliteral">&quot;id26-ipos&quot;</span>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> DEFAULT_SPEED = 2.0; <span class="comment">// deg/s</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> DEFAULT_TARGET = (-20.0);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="keyword">constexpr</span> <span class="keyword">auto</span> DEFAULT_PERIOD_MS = 20;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[])</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>{</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    yarp::os::ResourceFinder rf;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    rf.configure(argc, argv);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="keyword">auto</span> bus = rf.check(<span class="stringliteral">&quot;bus&quot;</span>, yarp::os::Value(DEFAULT_BUS), <span class="stringliteral">&quot;CAN bus group name&quot;</span>).asString();</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="keyword">auto</span> ipos = rf.check(<span class="stringliteral">&quot;ipos&quot;</span>, yarp::os::Value(DEFAULT_IPOS), <span class="stringliteral">&quot;iPOS group name&quot;</span>).asString();</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="keyword">auto</span> speed = rf.check(<span class="stringliteral">&quot;speed&quot;</span>, yarp::os::Value(DEFAULT_SPEED), <span class="stringliteral">&quot;trajectory speed (deg/s)&quot;</span>).asFloat64();</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="keyword">auto</span> target = rf.check(<span class="stringliteral">&quot;target&quot;</span>, yarp::os::Value(DEFAULT_TARGET), <span class="stringliteral">&quot;target position (deg)&quot;</span>).asFloat64();</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keyword">auto</span> period = rf.check(<span class="stringliteral">&quot;period&quot;</span>, yarp::os::Value(DEFAULT_PERIOD_MS), <span class="stringliteral">&quot;synchronization period (ms)&quot;</span>).asInt32() * 0.001;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="keywordflow">if</span> (speed &lt;= 0)</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        yError() &lt;&lt; <span class="stringliteral">&quot;Illegal speed (deg/s):&quot;</span> &lt;&lt; speed;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    }</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keywordflow">if</span> (period &lt;= 0)</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        yError() &lt;&lt; <span class="stringliteral">&quot;Illegal period (s):&quot;</span> &lt;&lt; period;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    }</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    yarp::os::Property robotConfig;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="keyword">auto</span> * robotConfigPtr = &amp;robotConfig;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="keyword">auto</span> path = rf.findFileByName(<span class="stringliteral">&quot;config.ini&quot;</span>);</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordflow">if</span> (path.empty() || !robotConfig.fromConfigFile(path))</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        yError() &lt;&lt; <span class="stringliteral">&quot;Unable to load robot config file&quot;</span>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <a id="_a0" name="_a0"></a><a class="code hl_class" href="classroboticslab_1_1TypedStateObserver.html">roboticslab::TypedStateObserver&lt;double&gt;</a> syncObserver(1.0);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keyword">auto</span> * syncObserverPtr = &amp;syncObserver;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    yarp::os::Property options;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    options.put(<span class="stringliteral">&quot;device&quot;</span>, yarp::os::Value(<span class="stringliteral">&quot;CanBusBroker&quot;</span>));</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    options.put(<span class="stringliteral">&quot;buses&quot;</span>, yarp::os::Value::makeList(bus.c_str()));</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    options.put(bus, yarp::os::Value::makeList(ipos.c_str()));</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    options.put(<span class="stringliteral">&quot;syncPeriod&quot;</span>, yarp::os::Value(period));</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    options.put(<span class="stringliteral">&quot;robotConfig&quot;</span>, yarp::os::Value::makeBlob(&amp;robotConfigPtr, <span class="keyword">sizeof</span>(robotConfigPtr)));</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    options.put(<span class="stringliteral">&quot;syncObserver&quot;</span>, yarp::os::Value::makeBlob(&amp;syncObserverPtr, <span class="keyword">sizeof</span>(syncObserverPtr)));</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    yarp::dev::PolyDriver dd(options);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="keywordflow">if</span> (!dd.isValid())</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    {</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        yError() &lt;&lt; <span class="stringliteral">&quot;Local device not available&quot;</span>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    yarp::dev::IControlMode * mode;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    yarp::dev::IEncoders * enc;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    yarp::dev::IPositionDirect * posd;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordflow">if</span> (!dd.view(mode) || !dd.view(enc) || !dd.view(posd))</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        yError() &lt;&lt; <span class="stringliteral">&quot;Unable to acquire robot interfaces&quot;</span>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    }</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordflow">if</span> (!mode-&gt;setControlMode(0, VOCAB_CM_POSITION_DIRECT))</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        yError() &lt;&lt; <span class="stringliteral">&quot;Unable to set position direct mode&quot;</span>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordtype">double</span> initialPos;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="keywordtype">int</span> retries = 0;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordflow">while</span> (!enc-&gt;getEncoder(0, &amp;initialPos) &amp;&amp; retries++ &lt; 10)</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        yarp::os::SystemClock::delaySystem(0.05);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="keywordflow">if</span> (retries &gt;= 10)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        yError() &lt;&lt; <span class="stringliteral">&quot;getEncoders() failed&quot;</span>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    yInfo() &lt;&lt; <span class="stringliteral">&quot;Current ENC value:&quot;</span> &lt;&lt; initialPos;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    std::cin.get();</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    yInfo() &lt;&lt; <span class="stringliteral">&quot;Moving joint&quot;</span> &lt;&lt; 0 &lt;&lt; <span class="stringliteral">&quot;to&quot;</span> &lt;&lt; target &lt;&lt; <span class="stringliteral">&quot;degrees...&quot;</span>;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> velocity = std::copysign(speed, target - initialPos);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> offset = yarp::os::SystemClock::nowSystem();</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordtype">double</span> lastRef;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="keywordtype">double</span> lastTimestamp;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keywordflow">while</span> (posd-&gt;getRefPosition(0, &amp;lastRef) &amp;&amp; std::abs(lastRef - initialPos) &lt; std::abs(target - initialPos))</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    {</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="keywordflow">if</span> (!syncObserver.<a id="a1" name="a1"></a><a class="code hl_function" href="classroboticslab_1_1TypedStateObserver.html#a13b36a1f71faabfd7efc59cf1134e2e6">await</a>(&amp;lastTimestamp))</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        {</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>            yWarning() &lt;&lt; <span class="stringliteral">&quot;Sync observer timeout&quot;</span>;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="keywordtype">double</span> t = lastTimestamp - offset;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <span class="keywordtype">double</span> e = initialPos + velocity * t;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        posd-&gt;setPosition(0, e);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    }</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>}</div>
<div class="ttc" id="aclassroboticslab_1_1TypedStateObserver_html"><div class="ttname"><a href="classroboticslab_1_1TypedStateObserver.html">roboticslab::TypedStateObserver</a></div><div class="ttdoc">Type state observer for non-arithmetic types.</div><div class="ttdef"><b>Definition</b> StateObserver.hpp:95</div></div>
<div class="ttc" id="aclassroboticslab_1_1TypedStateObserver_html_a13b36a1f71faabfd7efc59cf1134e2e6"><div class="ttname"><a href="classroboticslab_1_1TypedStateObserver.html#a13b36a1f71faabfd7efc59cf1134e2e6">roboticslab::TypedStateObserver::await</a></div><div class="ttdeci">bool await(T &amp;remote)</div><div class="ttdoc">Wait with timeout until another thread invokes notify.</div><div class="ttdef"><b>Definition</b> StateObserver.hpp:100</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
